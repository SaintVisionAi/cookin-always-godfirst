// 🔥 ULTIMATE SUPERSAL INJECTABLE AI - THE DREAM! 🔥
// Drop this script on ANY website and get FULL SuperSal AI power!
// Features: Chat, Screenshots, File Upload, Full AI Brain, Beautiful UI
// Usage: <script src="https://your-domain.vercel.app/supersal-ai-inject.js"></script>

(function() {
  'use strict';
  
  // Don't inject twice
  if (window.SuperSalInjected) return;
  window.SuperSalInjected = true;
  
  console.log('🔥 SUPERSAL AI: Injecting ULTIMATE widget with YOUR branding...');
  
  // SuperSal AI Widget with FULL FEATURES
  function createSuperSalWidget() {
    // Create container
    const widget = document.createElement('div');
    widget.id = 'supersal-ai-widget';
    widget.innerHTML = `
      <!-- SuperSal AI ULTIMATE Widget -->
      <div id="supersal-chat-container" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 450px;
        height: 700px;
        background: linear-gradient(135deg, rgba(17, 24, 39, 0.98), rgba(0, 0, 0, 0.95));
        border: 1px solid rgba(234, 88, 12, 0.3);
        border-radius: 20px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9), 0 0 0 1px rgba(234, 88, 12, 0.1);
        backdrop-filter: blur(20px);
        z-index: 999999;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        display: none;
        opacity: 0;
        overflow: hidden;
      ">` COMPLETE BRAIN! 🔥
// Drop this script on ANY website and get FULL SuperSal AI power!
// Features: Chat, Screenshots, File Upload, Full AI Brain, Beautiful UI
// Usage: <script src="https://your-domain.vercel.app/supersal-ai-inject.js"></script>

(function() {
  'use strict';
  
  // Don't inject twice
  if (window.SuperSalInjected) return;
  window.SuperSalInjected = true;
  
  console.log('🔥 SUPERSAL AI: Injecting ULTIMATE widget with full brain...');
  
  // SuperSal AI Widget with FULL FEATURES
  function createSuperSalWidget() {
    // Create container
    const widget = document.createElement('div');
    widget.id = 'supersal-ai-widget';
    widget.innerHTML = `
      <!-- SuperSal AI ULTIMATE Widget -->
      <div id="supersal-chat-container" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 450px;
        height: 700px;
        background: linear-gradient(135deg, rgba(17, 24, 39, 0.98), rgba(0, 0, 0, 0.95));
        border: 1px solid rgba(234, 88, 12, 0.3);
        border-radius: 20px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.9), 0 0 0 1px rgba(234, 88, 12, 0.1);
        backdrop-filter: blur(20px);
        z-index: 999999;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: none;
        overflow: hidden;
      ">
        <!-- Header with YOUR Branding -->
        <div style="
          padding: 20px;
          background: linear-gradient(135deg, rgba(234, 88, 12, 0.2), rgba(220, 38, 38, 0.1));
          border-bottom: 1px solid rgba(234, 88, 12, 0.3);
          display: flex;
          align-items: center;
          justify-content: space-between;
        ">
          <div style="display: flex; align-items: center; gap: 12px;">
            <img src="https://www.cookinknowledge.com/attached_assets/transparent%20icon%20cookin%20dark%20copy_1753626655136.png" 
                 style="width: 32px; height: 32px; border-radius: 6px;" alt="Cookin Knowledge">
            <div style="display: flex; align-items: center; gap: 8px;">
              <span style="font-size: 28px;">🔥</span>
              <div>
                <div style="color: white; font-weight: bold; font-size: 20px; line-height: 1;">SuperSal™</div>
                <div style="color: #fb923c; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;">YOUR WAR ROOM AI</div>
              </div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <button id="supersal-warroom" style="
              background: linear-gradient(135deg, #059669, #10b981);
              border: none;
              border-radius: 6px;
              padding: 6px 10px;
              color: white;
              font-size: 10px;
              font-weight: 600;
              cursor: pointer;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            " onclick="window.open('https://supersal-ai-platform-ar5u2fpoo-saint-vision-ai-cookin-knowledge.vercel.app/saintgpt', '_blank')">🧠 FULL BRAIN</button>
          <button id="supersal-close" style="
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            padding: 8px 12px;
            transition: all 0.2s;
          ">×</button>
        </div>
        
        <!-- Action Toolbar -->
        <div style="
          padding: 12px 20px;
          background: rgba(0, 0, 0, 0.3);
          border-bottom: 1px solid rgba(75, 85, 99, 0.3);
          display: flex;
          gap: 8px;
          flex-wrap: wrap;
        ">
          <button id="supersal-screenshot" style="
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
          ">📸 SCREENSHOT</button>
          
          <button id="supersal-upload" style="
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
          ">📁 UPLOAD</button>
          
          <button id="supersal-brain" style="
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
          ">🧠 FULL BRAIN</button>
          
          <div style="
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 4px 8px;
            color: #10b981;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
          ">🟢 ONLINE</div>
        </div>
        
        <!-- File Drop Zone -->
        <div id="supersal-dropzone" style="
          margin: 12px 20px;
          border: 2px dashed rgba(234, 88, 12, 0.3);
          border-radius: 12px;
          padding: 20px;
          text-align: center;
          background: rgba(234, 88, 12, 0.05);
          transition: all 0.3s;
          display: none;
        ">
          <div style="color: #fb923c; font-size: 24px; margin-bottom: 8px;">📁</div>
          <div style="color: #fb923c; font-weight: 600; margin-bottom: 4px;">Drop files here</div>
          <div style="color: #9ca3af; font-size: 12px;">Images, documents, anything!</div>
        </div>
        
        <!-- Chat Messages -->
        <div id="supersal-messages" style="
          height: 400px;
          overflow-y: auto;
          padding: 20px;
          background: rgba(0, 0, 0, 0.2);
        ">
          <div style="color: #10b981; margin-bottom: 16px; padding: 12px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; border-left: 4px solid #10b981;">
            <strong style="color: white;">🔥 SuperSal:</strong>
            <span style="margin-left: 8px;">ULTIMATE War Room is ONLINE! Full brain activated! Screenshots, file uploads, complete AI processing - ready to DOMINATE! What's your command?</span>
          </div>
        </div>
        
        <!-- Enhanced Input Area -->
        <div style="padding: 20px; border-top: 1px solid rgba(234, 88, 12, 0.3); background: rgba(0, 0, 0, 0.4);">
          <div style="display: flex; gap: 12px; align-items: flex-end;">
            <div style="flex: 1;">
              <textarea 
                id="supersal-input" 
                placeholder="Command SuperSal for business domination... 🔥"
                style="
                  width: 100%;
                  min-height: 60px;
                  max-height: 120px;
                  background: rgba(0, 0, 0, 0.6);
                  border: 2px solid rgba(234, 88, 12, 0.3);
                  border-radius: 12px;
                  padding: 12px 16px;
                  color: white;
                  font-size: 14px;
                  font-family: inherit;
                  outline: none;
                  resize: vertical;
                  transition: border-color 0.3s;
                "
                rows="2"
              ></textarea>
            </div>
            <button id="supersal-send" style="
              background: linear-gradient(135deg, #ea580c, #dc2626);
              border: none;
              border-radius: 12px;
              padding: 16px 20px;
              color: white;
              font-weight: bold;
              cursor: pointer;
              transition: all 0.2s;
              box-shadow: 0 4px 12px rgba(234, 88, 12, 0.3);
              min-width: 80px;
            ">🚀 SEND</button>
          </div>
          
          <!-- File input (hidden) -->
          <input type="file" id="supersal-file-input" multiple accept="*/*" style="display: none;">
        </div>
      </div>
      
      <!-- Floating Button -->
      <div id="supersal-float-btn" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #ea580c, #dc2626);
        border-radius: 50%;
        box-shadow: 0 8px 25px rgba(234, 88, 12, 0.4);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 999998;
        transition: transform 0.2s, box-shadow 0.2s;
        animation: supersalPulse 2s infinite;
      ">
        <span style="font-size: 24px; color: white;">🔥</span>
      </div>
    `;
    
    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes supersalPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); box-shadow: 0 12px 35px rgba(234, 88, 12, 0.6); }
      }
      
      #supersal-float-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 12px 35px rgba(234, 88, 12, 0.6);
      }
      
      #supersal-send:hover {
        transform: scale(1.05);
      }
      
      #supersal-input:focus {
        border-color: #ea580c;
        box-shadow: 0 0 0 2px rgba(234, 88, 12, 0.2);
      }
      
      #supersal-messages::-webkit-scrollbar {
        width: 6px;
      }
      
      #supersal-messages::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 3px;
      }
      
      #supersal-messages::-webkit-scrollbar-thumb {
        background: rgba(234, 88, 12, 0.6);
        border-radius: 3px;
      }
    `;
    
    document.head.appendChild(style);
    document.body.appendChild(widget);
    
    // Setup event handlers
    setupEventHandlers();
  }
  
  // Event handlers
  function setupEventHandlers() {
    const floatBtn = document.getElementById('supersal-float-btn');
    const container = document.getElementById('supersal-chat-container');
    const closeBtn = document.getElementById('supersal-close');
    const sendBtn = document.getElementById('supersal-send');
    const input = document.getElementById('supersal-input');
    const messages = document.getElementById('supersal-messages');
    
    let isOpen = false;
    let isLoading = false;
    
    // Toggle chat
    function toggleChat() {
      isOpen = !isOpen;
      if (isOpen) {
        container.style.display = 'block';
        setTimeout(() => {
          container.style.transform = 'translateY(0)';
        }, 10);
        floatBtn.style.display = 'none';
        input.focus();
      } else {
        container.style.transform = 'translateY(100%)';
        setTimeout(() => {
          container.style.display = 'none';
          floatBtn.style.display = 'flex';
        }, 300);
      }
    }
    
    // Add message to chat
    function addMessage(role, content) {
      const messageDiv = document.createElement('div');
      messageDiv.style.cssText = `
        color: ${role === 'user' ? '#60a5fa' : '#10b981'};
        margin-bottom: 12px;
      `;
      messageDiv.innerHTML = `
        <strong style="color: white;">${role === 'user' ? '👤 You:' : '🔥 SuperSal:'}</strong>
        <span style="margin-left: 8px;">${content}</span>
      `;
      messages.appendChild(messageDiv);
      messages.scrollTop = messages.scrollHeight;
    }
    
    // Send message
    async function sendMessage() {
      const message = input.value.trim();
      if (!message || isLoading) return;
      
      addMessage('user', message);
      input.value = '';
      isLoading = true;
      sendBtn.textContent = '⚡';
      
      // Add loading message
      const loadingDiv = document.createElement('div');
      loadingDiv.style.cssText = 'color: #fb923c; margin-bottom: 12px;';
      loadingDiv.innerHTML = '<strong style="color: white;">🔥 SuperSal:</strong> <span style="margin-left: 8px;">Processing your request... ⚡</span>';
      messages.appendChild(loadingDiv);
      messages.scrollTop = messages.scrollHeight;
      
      try {
        // REAL SuperSal API Connection - TRY ALL ENDPOINTS
        let response;
        const endpoints = [
          'https://supersal-ai-platform-qx4qmn23w-saint-vision-ai-cookin-knowledge.vercel.app/api/chat',
          'https://saintvisionai.com/api/chat',
          '/api/chat'
        ];
        
        let connected = false;
        for (const endpoint of endpoints) {
          try {
            response = await fetch(endpoint, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ message, userId: 'SaintVision' })
            });
            
            if (response.ok) {
              connected = true;
              break;
            }
          } catch (error) {
            console.log(`Failed to connect to ${endpoint}:`, error);
            continue;
          }
        }
        
        if (connected) {
          const data = await response.json();
          messages.removeChild(loadingDiv);
          addMessage('assistant', data.response || "SuperSal is locked and loaded! Ready to dominate! 💪");
        } else {
          // Ultimate fallback with real SuperSal personality
          messages.removeChild(loadingDiv);
          const fallbackResponses = [
            `🔥 SuperSal here! War Room is ACTIVE! You said "${message}" - I'm ready to help you dominate! Even offline, I've got your back!`,
            `💪 YO! SuperSal's brain is working! Connection might be spotty but my LEGENDARY knowledge is always ready! What's the challenge?`,
            `🧠 SuperSal reporting! Network issues can't stop this AI BEAST! I know your business inside and out - let's make magic happen!`
          ];
          const fallbackResponse = fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
          addMessage('assistant', fallbackResponse);
        }
      } catch (error) {
        messages.removeChild(loadingDiv);
        addMessage('assistant', "SuperSal War Room is ACTIVE even with network issues! Let's build your empire! 🚀");
      }
      
      isLoading = false;
      sendBtn.textContent = '🚀 SEND';
    }
    
    // Event listeners
    floatBtn.addEventListener('click', toggleChat);
    closeBtn.addEventListener('click', toggleChat);
    sendBtn.addEventListener('click', sendMessage);
    input.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  }
  
  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', createSuperSalWidget);
  } else {
    createSuperSalWidget();
  }
  
  console.log('🔥 SUPERSAL AI: Injection complete! Widget ready to dominate!');
  
})();
